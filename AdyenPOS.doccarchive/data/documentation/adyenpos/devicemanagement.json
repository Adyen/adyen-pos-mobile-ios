{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For a card reader solution (see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS"},{"type":"text","text":"), you need to add specific metadata to your POS app. You also need to present a device management UI for pairing your mobile device and the card reader, connecting to the card reader, and viewing card reader details."}]},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Skip these instructions if you are building a Tap to Pay on iPhone integration."}]}],"type":"aside","name":"Important"},{"anchor":"Manage-permissions","level":2,"type":"heading","text":"Manage permissions"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Your POS app needs to have certain permissions for pairing the iPhone with the card reader."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In the "},{"type":"codeVoice","code":"Info.plist"},{"type":"text","text":" of your POS app, add the following keys with an appropriate explanation:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsbluetoothalwaysusagedescription"},{"type":"text","text":": this enables setting up a Bluetooth pairing between the iPhone and the card reader."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nscamerausagedescription"},{"type":"text","text":": this enables using the phone’s camera to scan the barcode of the card reader. Barcode scanning is one of the ways to select a card reader for pairing."}]}]}]}]}]},{"anchor":"Suppress-Apple-Pay-in-your-POS-app","level":2,"type":"heading","text":"Suppress Apple Pay in your POS app"},{"style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To accept payments from customers, you must suppress Apple Pay on the device that runs your mobile POS app."}]}],"type":"aside","name":"Warning"},{"type":"paragraph","inlineContent":[{"type":"text","text":"It is possible that Apple Pay is enabled on the mobile device that runs your POS app. For example, if staff use their personal iPhone. When a card reader is near, the device running the POS app tries to make the payment using the Apple Pay passes that are on the device."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To prevent this from happening, you must suppress Apple Pay in your POS app when your app is in the foreground."}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Contact Apple Pay at apple-pay-inquiries@apple.com and ask for an entitlement to suppress Apple Pay."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When you receive confirmation that the entitlement was granted, add the entitlement to your provisioning profile on the Apple developer website."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In Xcode, in the "},{"type":"strong","inlineContent":[{"type":"text","text":"Signing & Capabilities"}]},{"type":"text","text":" settings, add the "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/library\/archive\/documentation\/Miscellaneous\/Reference\/EntitlementKeyReference\/ApplePayandPassKitEntitlements\/ApplePayandPassKitEntitlements.html"},{"type":"text","text":" key to the "},{"type":"emphasis","inlineContent":[{"type":"text","text":".entitlements"}]},{"type":"text","text":" file for your POS app."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In your POS app, call "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/passkit\/pkpasslibrary\/1617078-requestautomaticpasspresentation"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This method automatically switches between disabling Apple Pay when the POS app is in the foreground, and enabling Apple Pay when the POS app is in the background."}]}]}]},{"anchor":"Use-or-create-a-UI-for-device-management","level":2,"type":"heading","text":"Use or create a UI for device management"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To use the card reader, store staff needs to pair the mobile device running the SDK with the card reader. The SDK provides a built-in UI for that."},{"type":"text","text":" "},{"type":"text","text":"Store staff will also want to see an overview of card readers and view details of the card reader they are using. For example, to check the battery charge level. The SDK also provides a built-in UI for that. Here are some example screens."}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"nearby-or-scan"},{"type":"text","text":" "},{"type":"image","identifier":"device-management-list"},{"type":"text","text":" "},{"type":"image","identifier":"device-management-details"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To handle the device pairing and viewing of device details, you can:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the built-in UI through SwiftUI"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the built-in UI through UIKit"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Build a custom UI"}]}]}]},{"anchor":"Use-the-UI-through-SwiftUI","level":3,"type":"heading","text":"Use the UI through SwiftUI"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To use the device management screens built into the SDK from within SwiftUI:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementView"},{"type":"text","text":" to the "},{"type":"codeVoice","code":"body"},{"type":"text","text":" property of your "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view"},{"type":"text","text":". One of the ways to do that, is using a "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/sheet(item:ondismiss:content:)"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["struct MyView: View {","    @State private var showingDeviceManagement = false","    private let paymentService: PaymentService = ...","","    var body: some View {","        { ... }","        .sheet(isPresented: $showingDeviceManagement) {","            NavigationView { DeviceManagementView(paymentService: paymentService) }","        }","    }","}"]}]}]},{"anchor":"Use-the-UI-through-UIKit","level":3,"type":"heading","text":"Use the UI through UIKit"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To use the device management screens built into the SDK from within UIKit:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementViewController"},{"type":"text","text":" using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementViewController\/init(paymentService:)"},{"type":"text","text":", passing your instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/PaymentService"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Present it in your preferred way. For example, with "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontroller\/1621380-presentviewcontroller"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["class MyViewController: UIViewController {","    let paymentService = PaymentService { ... }","","    func presentDeviceManagement() {","        let deviceManagementViewController = DeviceManagementViewController(paymentService: paymentService)","        present(deviceManagementViewController, animated: true)","    }","}"]}]}]},{"anchor":"Custom-UI","level":3,"type":"heading","text":"Custom UI"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you intend to build your own UI for device management, use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagerDelegate"},{"type":"text","text":" protocol to obtain all the necessary information."},{"type":"text","text":" "},{"type":"text","text":"Refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagerDelegate"},{"type":"text","text":" for details."}]},{"anchor":"Avoid-reconnection-delays","level":2,"type":"heading","text":"Avoid reconnection delays"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The card reader goes to sleep after about five minutes. When you start a transaction after the reader has gone to sleep, there is a slight delay while the mobile device reconnects to the last connected reader. To avoid this delay, you can take either of the following measures:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Before starting the transaction, wake up the card reader by calling the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManager\/connect(to:)"},{"type":"text","text":" function."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Regularly refresh the connection between the mobile device and the card reader by implementing a timer that calls the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManager\/connect(to:)"},{"type":"text","text":" function every couple of minutes."}]}]}]},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Be aware that implementing a timer can significantly decrease the battery life of the card reader."}]}],"type":"aside","name":"Important"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Call the "},{"type":"codeVoice","code":"connect"},{"type":"text","text":" method as follows, where "},{"type":"codeVoice","code":"viewModel"},{"type":"text","text":" is a class that contains an instance of the SDK’s "},{"type":"codeVoice","code":"PaymentService"},{"type":"text","text":" (for an example, see our "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Adyen\/adyen-pos-mobile-ios\/blob\/main\/POSSampleApp\/SampleAppSwiftUI\/MainViewModel.swift#L17"},{"type":"text","text":"):"}]},{"type":"codeListing","syntax":"swift","code":["Button(\"Connect to last known reader\") {","    if let device = viewModel.paymentService.deviceManager.knownDevices.first {","        viewModel.paymentService.deviceManager.connect(to: device)","    }","}"]},{"anchor":"Related-steps","level":2,"type":"heading","text":"Related steps"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/Integration"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/Payments"}]}]}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/adyenpos\/devicemanagement"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagement","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Manage pairing and viewing payment devices like the card reader."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Add payment device management","role":"article","modules":[{"name":"AdyenPOS"}]},"hierarchy":{"paths":[["doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS"]]},"references":{"device-management-details":{"alt":"Card reader details","type":"image","identifier":"device-management-details","variants":[{"url":"\/images\/device-management-details.png","traits":["1x","light"]},{"url":"\/images\/device-management-details@2x.png","traits":["2x","light"]}]},"nearby-or-scan":{"alt":"Set up reader","type":"image","identifier":"nearby-or-scan","variants":[{"url":"\/images\/nearby-or-scan.png","traits":["1x","light"]},{"url":"\/images\/nearby-or-scan@2x.png","traits":["2x","light"]}]},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/Payments":{"role":"article","title":"Make transactions","abstract":[{"type":"text","text":"Add code to make a transaction from your iOS POS app using the POS Mobile SDK."}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/Payments","kind":"article","type":"topic","url":"\/documentation\/adyenpos\/payments"},"device-management-list":{"alt":"Overview of card readers","type":"image","identifier":"device-management-list","variants":[{"url":"\/images\/device-management-list.png","traits":["1x","light"]},{"url":"\/images\/device-management-list@2x.png","traits":["2x","light"]}]},"https://developer.apple.com/documentation/swiftui/view/sheet(item:ondismiss:content:)":{"title":".sheet","titleInlineContent":[{"type":"text","text":".sheet"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/sheet(item:ondismiss:content:)","url":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/sheet(item:ondismiss:content:)"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/DeviceManagementViewController":{"role":"symbol","title":"DeviceManagementViewController","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"DeviceManagementViewController"}],"abstract":[{"type":"text","text":"Provides user interface to manage physical devices."},{"type":"text","text":" "},{"type":"text","text":"Wraps "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementView"},{"type":"text","text":" for use in UIKit-based apps."}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementViewController","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DeviceManagementViewController"}],"url":"\/documentation\/adyenpos\/devicemanagementviewcontroller"},"https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/EntitlementKeyReference/ApplePayandPassKitEntitlements/ApplePayandPassKitEntitlements.html":{"title":"com.apple.developer.passkit.pass-presentation-suppression ","titleInlineContent":[{"type":"codeVoice","code":"com.apple.developer.passkit.pass-presentation-suppression"},{"type":"text","text":" "}],"type":"link","identifier":"https:\/\/developer.apple.com\/library\/archive\/documentation\/Miscellaneous\/Reference\/EntitlementKeyReference\/ApplePayandPassKitEntitlements\/ApplePayandPassKitEntitlements.html","url":"https:\/\/developer.apple.com\/library\/archive\/documentation\/Miscellaneous\/Reference\/EntitlementKeyReference\/ApplePayandPassKitEntitlements\/ApplePayandPassKitEntitlements.html"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/DeviceManager/connect(to:)":{"role":"symbol","title":"connect(to:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"connect"},{"kind":"text","text":"("},{"kind":"externalParam","text":"to"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Device","preciseIdentifier":"s:8AdyenPOS6DeviceV"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Attemps to connect to a given device"}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManager\/connect(to:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/adyenpos\/devicemanager\/connect(to:)"},"https://developer.apple.com/documentation/passkit/pkpasslibrary/1617078-requestautomaticpasspresentation":{"title":"requestAutomaticPassPresentationSuppression","titleInlineContent":[{"type":"text","text":"requestAutomaticPassPresentationSuppression"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/passkit\/pkpasslibrary\/1617078-requestautomaticpasspresentation","url":"https:\/\/developer.apple.com\/documentation\/passkit\/pkpasslibrary\/1617078-requestautomaticpasspresentation"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/PaymentService":{"role":"symbol","title":"PaymentService","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"PaymentService"}],"abstract":[{"type":"text","text":"The main point of interaction with the SDK."}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/PaymentService","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PaymentService"}],"url":"\/documentation\/adyenpos\/paymentservice"},"https://developer.apple.com/documentation/bundleresources/information_property_list/nsbluetoothalwaysusagedescription":{"title":"NSBluetoothAlwaysUsageDescription","titleInlineContent":[{"type":"codeVoice","code":"NSBluetoothAlwaysUsageDescription"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsbluetoothalwaysusagedescription","url":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsbluetoothalwaysusagedescription"},"https://developer.apple.com/documentation/uikit/uiviewcontroller/1621380-presentviewcontroller":{"title":"presentViewController:animated:completion:","titleInlineContent":[{"type":"text","text":"presentViewController:animated:completion:"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontroller\/1621380-presentviewcontroller","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontroller\/1621380-presentviewcontroller"},"https://github.com/Adyen/adyen-pos-mobile-ios/blob/main/POSSampleApp/SampleAppSwiftUI/MainViewModel.swift#L17":{"title":"sample app","titleInlineContent":[{"type":"text","text":"sample app"}],"type":"link","identifier":"https:\/\/github.com\/Adyen\/adyen-pos-mobile-ios\/blob\/main\/POSSampleApp\/SampleAppSwiftUI\/MainViewModel.swift#L17","url":"https:\/\/github.com\/Adyen\/adyen-pos-mobile-ios\/blob\/main\/POSSampleApp\/SampleAppSwiftUI\/MainViewModel.swift#L17"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/DeviceManagementViewController/init(paymentService:)":{"role":"symbol","title":"init(paymentService:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"paymentService"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"PaymentService","preciseIdentifier":"s:8AdyenPOS14PaymentServiceC"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementViewController\/init(paymentService:)","kind":"symbol","type":"topic","url":"\/documentation\/adyenpos\/devicemanagementviewcontroller\/init(paymentservice:)"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/Integration":{"role":"article","title":"Integrate the POS iOS SDK","abstract":[{"type":"text","text":"Update your code to integrate the POS Mobile SDK in your iOS POS app."}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/Integration","kind":"article","type":"topic","url":"\/documentation\/adyenpos\/integration"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/DeviceManagementView":{"role":"symbol","title":"DeviceManagementView","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DeviceManagementView"}],"abstract":[{"type":"text","text":"Provides user interface to manage physical devices"}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagementView","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DeviceManagementView"}],"url":"\/documentation\/adyenpos\/devicemanagementview"},"https://developer.apple.com/documentation/swiftui/view":{"title":"View","titleInlineContent":[{"type":"text","text":"View"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view","url":"https:\/\/developer.apple.com\/documentation\/swiftui\/view"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS/DeviceManagerDelegate":{"role":"symbol","title":"DeviceManagerDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DeviceManagerDelegate"}],"abstract":[{"type":"text","text":"Handles events concerning physical devices connection lifecycle"}],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS\/DeviceManagerDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DeviceManagerDelegate"}],"url":"\/documentation\/adyenpos\/devicemanagerdelegate"},"https://developer.apple.com/documentation/bundleresources/information_property_list/nscamerausagedescription":{"title":"NSCameraUsageDescription","titleInlineContent":[{"type":"codeVoice","code":"NSCameraUsageDescription"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nscamerausagedescription","url":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nscamerausagedescription"},"doc://com.adyen.AdyenPOS/documentation/AdyenPOS":{"role":"collection","title":"AdyenPOS","abstract":[],"identifier":"doc:\/\/com.adyen.AdyenPOS\/documentation\/AdyenPOS","kind":"symbol","type":"topic","url":"\/documentation\/adyenpos"}}}